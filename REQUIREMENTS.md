# 바보상자자물쇠 (SmartLock Box) - iOS 앱 요구사항정의서

## 📋 프로젝트 개요
- **프로젝트명**: 바보상자자물쇠 (SmartLock Box)
- **플랫폼**: iOS
- **개발언어**: Swift
- **버전**: v1.0
- **문서 작성일**: 2025년 9월

## 🎯 배경 및 목적

### 배경
현대 사회에서 스마트폰 사용량이 급증하면서, 디지털 디톡스에 대한 필요성이 대두되고 있습니다. 많은 사용자들이 스크린타임 기능을 활용하여 강제적으로 휴대폰 사용을 제한하고자 하지만, 기존 방식은 쉽게 해제가 가능하여 실질적인 효과가 제한적입니다.

### 목적
사용자가 설정한 시간 제한을 초과했을 때 창의적 사고를 통해서만 해제 가능한 스마트폰 잠금 시스템을 제공하여, 건전한 디지털 라이프스타일을 유도합니다.

## 🔧 핵심 기능

### 1. 시간 제한 설정 및 모니터링
- 사용자가 일일 스마트폰 사용 시간 제한을 설정
- 실시간 사용량 모니터링 및 알림
- 설정된 시간 초과 시 자동 잠금 활성화

### 2. 선택적 앱 제어
- 지정된 시간 초과 시 대부분의 앱 접근 차단
- **예외 허용 앱**: 전화, SMS, 응급상황 앱
- iOS Screen Time API 연동을 통한 시스템 레벨 제어

### 3. 자동 해제 시스템
- 다음날 0시 또는 사용자가 설정한 시간에 자동 해제
- 해제 시간까지 남은 시간 표시

### 4. 창의적 문제 해결을 통한 조기 해제

#### 4.1 단어 선택 시스템
- 사전에 준비된 **20,000개의 한국어 단어 데이터베이스**
- 랜덤하게 2개의 단어를 선택하여 화면에 표시
- 단어 카테고리: 명사, 동사, 형용사, 추상명사 등 다양한 품사 포함

#### 4.2 창의적 답변 생성
- 제시된 2개 단어를 **모두 포함**한 문장 작성
- **최소 10글자 이상**의 한국어 문장
- 단순 나열이 아닌 의미 있는 문장 구성 필요

#### 4.3 AI 기반 창의력 평가
- **OpenAI GPT API** 및 **Anthropic Claude API** 동시 활용
- 두 AI 시스템 모두에서 **"Pass"** 판정을 받아야 해제
- 평가 기준:
  - 두 단어의 적절한 활용
  - 문장의 창의성 및 독창성
  - 문법적 정확성
  - 의미적 연관성

## 📱 사용자 스토리

### Story 1: 시간 제한 설정
```
사용자로서 하루 스마트폰 사용 시간을 3시간으로 제한하고 싶다.
그래서 앱에서 3시간을 설정하면, 3시간 사용 후 자동으로 폰이 잠긴다.
```

### Story 2: 사용량 모니터링
```
사용자로서 현재까지 얼마나 사용했는지, 얼마나 더 사용할 수 있는지 알고 싶다.
그래서 메인 화면에서 "오늘 2시간 30분 사용 / 목표 3시간 (30분 남음)"을 확인할 수 있다.
```

### Story 3: 잠금 상태 확인
```
사용자로서 폰이 잠긴 상태에서 언제까지 기다려야 하는지 알고 싶다.
그래서 잠금 화면에서 "9시간 30분 후 자동 해제"를 확인할 수 있다.
```

### Story 4: 창의적 해제 시도
```
사용자로서 급한 일이 있어 제한 시간 전에 폰을 해제하고 싶다.
그래서 열쇠 버튼을 누르고 "바다"와 "꿈" 단어로 창의적인 문장을 만들어 AI 승인을 받는다.
```

### Story 5: 기본 기능 접근
```
앱이 잠겨있는 상태에서도 응급상황에 대비하여 전화와 문자는 사용할 수 있어야 한다.
```

## 🛠 기술 요구사항

### iOS 개발 환경
- **최소 지원 버전**: iOS 15.0+
- **개발 도구**: Xcode 14+
- **언어**: Swift 5.5+
- **아키텍처**: MVVM 패턴

### 주요 기술 스택
- **Screen Time API**: 앱 사용 시간 모니터링 및 제어
- **Core Data**: 로컬 데이터 저장 (사용 기록, 설정값)
- **URLSession**: API 통신
- **UserNotifications**: 시간 초과 알림
- **Foundation**: 날짜/시간 처리

### 외부 API 연동
- **OpenAI GPT-4 API**
  - 창의력 평가 엔드포인트
  - API 키 관리 및 보안
- **Anthropic Claude API**
  - 이중 검증을 위한 창의력 평가
  - Fail-safe 시스템

### 데이터 관리
- **단어 데이터베이스**: 20,000개 한국어 단어
  - JSON 형태로 앱 번들에 포함
  - 카테고리별 분류 및 인덱싱
- **사용 통계**: 일별/주별/월별 사용 패턴 분석

## 🎨 사용자 인터페이스

### 메인 화면 (정상 상태)

#### 핵심 철학
불필요한 요소를 제거하고 사용자에게 동기부여를 제공하는 직관적인 화면 구성. GitHub 커밋 기록처럼 시각적으로 성취감을 느낄 수 있도록 설계.

#### 화면 레이아웃 구조
```
┌─────────────────────────────────────────┐
│         📱 바보상자자물쇠                │
├─────────────────────────────────────────┤
│                                         │
│   🎯 오늘의 목표 달성률                  │
│   ┌─────────────────────────────────┐   │
│   │  2시간 30분 / 3시간             │   │
│   │  ████████████░░░░ 83%           │   │
│   └─────────────────────────────────┘   │
│                                         │
│   ⏰ 잠금까지 남은 시간                  │
│   ┌─────────────────────────────────┐   │
│   │        30분                     │   │
│   │     (오후 6시 30분 잠금)         │   │
│   └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│   📊 이번 주 사용 현황                   │
│   ┌─────────────────────────────────┐   │
│   │  총 18시간 30분 / 21시간         │   │
│   │  평균: 2시간 38분/일             │   │
│   └─────────────────────────────────┘   │
│                                         │
├─────────────────────────────────────────┤
│   📅 월간 목표 달성 현황                 │
│   (GitHub 스타일 히트맵)                 │
│                                         │
│   월  ■ ■ □ ■ ■ ■ □ ■ ■ ■            │
│   화  ■ ■ ■ □ ■ ■ ■ ■ □ ■            │
│   수  ■ □ ■ ■ ■ □ ■ ■ ■ ■            │
│   목  ■ ■ ■ ■ ■ ■ ■ □ ■ ■            │
│   금  □ ■ ■ ■ □ ■ ■ ■ ■ ■            │
│   토  ■ ■ □ ■ ■ ■ ■ ■ □ ■            │
│   일  ■ ■ ■ ■ ■ □ ■ ■ ■ ■            │
│                                         │
│   ■ 목표 달성  □ 목표 미달성              │
│   이번 달 달성률: 87% (26/30일)          │
│                                         │
├─────────────────────────────────────────┤
│         [⚙️ 설정]    [📈 상세통계]      │
└─────────────────────────────────────────┘
```

#### 1. 오늘의 목표 달성률 영역 (최상단 - 메인 포커스)
- **현재 사용시간 표시**: 실시간 업데이트
  - "2시간 30분 / 3시간" 형식
  - 큰 폰트로 강조 표시
- **비주얼 프로그레스바**: 
  - 사용률에 따른 색상 변화
    - 0-60%: 초록색 (안전)
    - 61-85%: 노란색 (주의)
    - 86-100%: 빨간색 (위험)
  - 퍼센트 수치 표시 (예: 83%)
  - 부드러운 애니메이션 효과

#### 2. 잠금까지 남은 시간 영역
- **남은 시간 강조 표시**: 
  - "30분" - 큰 폰트로 강조
  - 실시간 카운트다운
- **예상 잠금 시각**:
  - "(오후 6시 30분 잠금)" - 작은 폰트로 보조 정보
- **시각적 효과**:
  - 시간이 10분 이하일 때 경고 색상 및 펄스 애니메이션
  - 매 분마다 자동 업데이트

#### 3. 이번 주 사용 현황 영역
- **주간 총 사용시간**:
  - "총 18시간 30분 / 21시간"
  - 주간 목표 대비 사용량
- **일평균 사용시간**:
  - "평균: 2시간 38분/일"
- **목표 대비 진행률**:
  - 간단한 프로그레스 인디케이터 또는 아이콘

#### 4. 월간 목표 달성 현황 (GitHub 스타일 히트맵)
- **시각적 히트맵**:
  - 7×4~5 그리드 (요일 × 주)
  - 각 박스는 하루를 나타냄
  - **색상 구분**:
    - ■ (진한 초록색): 목표 달성
    - □ (회색): 목표 미달성
    - 중간 톤: 부분 달성 (선택사항)
- **상호작용**:
  - 각 박스 탭 시 해당 날짜의 상세 정보 표시
  - 스크롤 가능 (이전 달 조회)
- **통계 정보**:
  - "이번 달 달성률: 87% (26/30일)"
  - 연속 달성 일수 표시 (선택사항)
- **동기부여 효과**:
  - 연속으로 채워지는 박스를 보며 성취감
  - 빈 박스를 채우고 싶은 동기 유발

#### 5. 하단 액션 버튼 영역 (미니멀)
- **⚙️ 설정 버튼**: 
  - 목표 시간 설정/수정
  - 알림 설정
  - 예외 앱 관리
- **📈 상세통계 버튼**:
  - 주간/월간 상세 분석 화면으로 이동
  - 사용 패턴 분석
  - 앱별 사용 시간

#### 설계 원칙
1. **단순함 (Simplicity)**: 
   - 불필요한 버튼과 정보 제거
   - 핵심 정보에만 집중
   
2. **동기부여 (Motivation)**: 
   - 시각적 성취감 제공 (히트맵)
   - 긍정적인 피드백 시스템
   
3. **실시간성 (Real-time)**: 
   - 모든 데이터 실시간 업데이트
   - 사용자의 현재 상태 명확히 표시
   
4. **직관성 (Intuitive)**: 
   - 복잡한 설명 없이 한눈에 이해 가능
   - 색상과 아이콘으로 직관적 전달

### 잠금 화면 (제한 시간 초과 시)
#### 중앙 잠금 표시 영역
- **자물쇠 아이콘**: 큰 자물쇠 모양 (애니메이션 효과)
- **잠금 상태 메시지**: "스마트폰이 잠겨있습니다"
- **사용시간 정보**: "오늘 3시간 사용 완료"

#### 시간 정보 영역
- **해제까지 남은 시간**: 
  - "9시간 30분 후 자동 해제"
  - 실시간 카운트다운 (분/초 단위로 업데이트)
  - 시간에 따른 색상 변화

#### 액션 버튼 영역
- **🗝️ 열쇠 버튼**: "창의력으로 해제하기"
  - 중앙에 위치한 열쇠 모양 버튼
  - 터치 시 펄스 애니메이션
- **📞 응급 통화 버튼**: "응급상황 연락"
  - 하단에 작게 표시

### 창의적 해제 화면 (열쇠 버튼 클릭 시)

#### 단계 1: 문제 제시 화면
```
┌─────────────────────────────────┐
│    🗝️ 창의적 해제 도전          │
├─────────────────────────────────┤
│  제시단어 2개를 포함한 창의적인  │
│  문장을 만들어 자물쇠를         │
│  풀어보세요!                   │
├─────────────────────────────────┤
│  ┌─────────┐ ┌─────────┐      │
│  │  바다   │ │  꿈     │      │
│  └─────────┘ └─────────┘      │
├─────────────────────────────────┤
│  ┌─────────────────────────────┐│
│  │ 여기에 문장을 입력하세요...  ││
│  └─────────────────────────────┘│
│  최소 10글자 이상 (현재: 0글자)  │
├─────────────────────────────────┤
│      [다른 단어로 변경]         │
│         [제출하기]             │
└─────────────────────────────────┘
```

#### 단계 2: AI 평가 진행 화면
```
┌─────────────────────────────────┐
│      🤖 AI가 평가 중입니다       │
├─────────────────────────────────┤
│  입력된 문장:                   │
│  "바다에서 꿈같은 일몰을        │
│   바라보며 평화를 느꼈다"       │
├─────────────────────────────────┤
│  ChatGPT 평가: ⏳ 진행중...     │
│  Claude 평가: ⏳ 대기중...      │
├─────────────────────────────────┤
│        로딩 애니메이션          │
└─────────────────────────────────┘
```

#### 단계 3: 결과 표시 화면
**성공 시:**
```
┌─────────────────────────────────┐
│      ✅ 해제 성공!              │
├─────────────────────────────────┤
│  ChatGPT 평가: PASS ✅          │
│  "창의적이고 감성적인 표현"     │
│                                │
│  Claude 평가: PASS ✅           │
│  "두 단어의 조화로운 활용"      │
├─────────────────────────────────┤
│    🔓 자물쇠가 열렸습니다!      │
│                                │
│      [메인으로 돌아가기]        │
└─────────────────────────────────┘
```

**실패 시:**
```
┌─────────────────────────────────┐
│      ❌ 해제 실패               │
├─────────────────────────────────┤
│  ChatGPT 평가: FAIL ❌          │
│  "단순한 단어 나열"            │
│                                │
│  Claude 평가: PASS ✅           │
│  "적절한 문법 구조"            │
├─────────────────────────────────┤
│   두 AI 모두 통과해야 해제됩니다 │
│                                │
│      [다시 도전하기]            │
│      [잠금 화면으로]            │
└─────────────────────────────────┘
```

#### 기능 상세
- **단어 새로고침**: 하루 3회 제한
- **실시간 글자 수 카운터**: 10글자 미만 시 제출 버튼 비활성화
- **단어 포함 여부 체크**: 두 단어가 모두 포함되지 않으면 경고 메시지
- **API 타임아웃**: 30초 후 자동 실패 처리
- **재시도 제한**: 하루 10회까지 도전 가능

## ⚠️ 제약사항 및 고려사항

### 기술적 제약
- iOS Screen Time API의 권한 요청 필요
- 앱스토어 정책 준수 (Screen Time 카테고리)
- 시스템 레벨 잠금의 한계

### 보안 및 개인정보
- API 키 보안 저장 (Keychain 활용)
- 사용자 데이터 로컬 저장 원칙
- 창의적 답변 데이터는 API 전송 후 즉시 삭제

### 사용성
- 응급상황 시 우회 방법 제공
- 과도한 제약으로 인한 사용자 이탈 방지
- AI 평가 기준의 일관성 확보

## 📈 향후 개발 계획

### Phase 1: 기본 기능 (v1.0)
- 시간 제한 설정 및 모니터링
- 기본 잠금/해제 기능
- 창의적 해제 시스템

### Phase 2: 개선 기능 (v1.1)
- 사용 통계 분석 및 리포트
- 맞춤형 단어 카테고리 설정
- 가족/친구와 함께하는 챌린지 모드

### Phase 3: 고도화 (v1.2)
- 머신러닝 기반 개인별 창의력 평가 기준 조정
- 음성 인식을 통한 답변 입력
- Apple Watch 연동

## 📝 개발 일정 (예상)

| 주차 | 작업 내용 |
|------|-----------|
| 1-2주 | 프로젝트 설정, UI/UX 디자인 |
| 3-4주 | Screen Time API 연동, 기본 잠금 기능 |
| 5-6주 | 단어 데이터베이스 구성, 랜덤 선택 로직 |
| 7-8주 | AI API 연동, 창의력 평가 시스템 |
| 9-10주 | 테스트, 버그 수정, 최적화 |
| 11-12주 | 앱스토어 제출 준비 |

## 📋 성공 지표

- 사용자 일일 스마트폰 사용 시간 20% 이상 감소
- 창의적 해제 성공률 30% 미만 유지 (적절한 난이도)
- 앱 사용 지속률 (1개월 기준) 60% 이상
- 사용자 만족도 평점 4.0/5.0 이상

---

**문서 버전**: 1.3  
**최종 수정일**: 2025년 10월 10일  
**작성자**: DevJihwan