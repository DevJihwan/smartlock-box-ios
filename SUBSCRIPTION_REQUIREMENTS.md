# 바보상자자물쇠 - 구독 모델 요구사항 정의서

## 📋 문서 정보
- **문서명**: 구독 모델 및 시간 제한 기능 차별화 요구사항
- **버전**: v1.0
- **작성일**: 2025년 11월 3일
- **작성자**: DevJihwan
- **관련 문서**: REQUIREMENTS.md

---

## 🎯 구독 모델 개요

### 비즈니스 목표
- **무료 사용자**: 앱의 핵심 가치를 경험하고 유료 전환 유도
- **Premium 사용자**: 시간대별 세밀한 제어로 생산성 극대화
- **Pro 사용자**: 요일별 맞춤 설정으로 라이프스타일 최적화

### 핵심 차별화 포인트
**시간 제한 설정의 유연성**을 구독 티어의 핵심 가치로 설정하여, 사용자가 자신의 라이프스타일에 맞는 세밀한 제어를 원할수록 상위 티어로 전환하도록 유도

---

## 💎 구독 티어 정의

### 1️⃣ Free (무료)
**가격**: $0
**타겟**: 디지털 디톡스 입문자, 앱 체험 사용자

### 2️⃣ Premium (프리미엄)
**가격**: 
- 월간: $4.99 (₩6,900)
- 연간: $39.99 (₩54,900) - 33% 할인

**타겟**: 시간대별 세밀한 제어가 필요한 직장인/학생

### 3️⃣ Pro (프로)
**가격**: 
- 월간: $9.99 (₩13,900)
- 연간: $79.99 (₩109,900) - 33% 할인

**타겟**: 요일별 다른 루틴을 가진 파워 유저

---

## ⏰ 시간 제한 설정 기능 상세 요구사항

### 📱 Free 티어 - 하루 총 사용량 제한

#### 기능 설명
무료 사용자는 **하루 전체 사용 시간**만 설정 가능하며, 특정 시간대를 구분하여 제어할 수 없습니다.

#### 설정 가능 항목
```
┌─────────────────────────────────────┐
│     📱 하루 사용 시간 설정          │
├─────────────────────────────────────┤
│                                     │
│  오늘의 목표 사용 시간:              │
│                                     │
│  ┌─────────────────────────────┐   │
│  │     [  3시간  ]             │   │
│  │     (Picker)                │   │
│  └─────────────────────────────┘   │
│                                     │
│  ⚠️ 하루 총 사용량만 제한됩니다      │
│                                     │
│  💎 시간대별 세부 제어가 필요하신가요?│
│     [Premium 살펴보기 →]           │
│                                     │
└─────────────────────────────────────┘
```

#### 동작 방식
1. **단일 카운터 방식**
   - 00:00부터 23:59까지 누적 사용 시간 추적
   - 설정한 시간(예: 3시간)에 도달하면 즉시 잠금
   
2. **제한 사항**
   - ❌ 시간대별 분할 불가
   - ❌ 특정 시간에만 사용 제한 불가
   - ❌ 점심시간/저녁시간 구분 불가

3. **예시 시나리오**
   ```
   설정: 하루 3시간
   
   실제 사용:
   09:00-10:30 → 1시간 30분 사용 (잔여: 1시간 30분)
   14:00-15:00 → 1시간 사용 (잔여: 30분)
   19:00-19:30 → 30분 사용 (잔여: 0분) ❌ 잠김!
   ```

#### 사용자 피드백
- ℹ️ **안내 메시지**: "Premium으로 업그레이드하면 아침/점심/저녁 시간대를 각각 설정할 수 있습니다"
- 📊 **통계 화면**: "시간대별 사용 패턴" 영역에 흐릿한 처리 + "Premium 기능" 배지

---

### 💎 Premium 티어 - 시간대별 제한 (최대 3개)

#### 기능 설명
Premium 사용자는 **하루를 최대 3개 시간대로 분할**하여 각 시간대별로 독립적인 사용 시간을 설정할 수 있습니다.

#### 설정 가능 항목
```
┌─────────────────────────────────────┐
│   💎 시간대별 사용 시간 설정         │
├─────────────────────────────────────┤
│                                     │
│  [+ 시간대 추가] (3개 중 2개 사용)   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 📅 시간대 1                  │   │
│  │ ⏰ 09:00 - 12:00            │   │
│  │ ⏱️  사용 시간: 1시간         │   │
│  │              [수정] [삭제]   │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 📅 시간대 2                  │   │
│  │ ⏰ 18:00 - 23:00            │   │
│  │ ⏱️  사용 시간: 2시간         │   │
│  │              [수정] [삭제]   │   │
│  └─────────────────────────────┘   │
│                                     │
│  ⚠️ 시간대는 겹칠 수 없습니다        │
│                                     │
│  💡 요일별 다른 설정이 필요하신가요?  │
│     [Pro 살펴보기 →]               │
│                                     │
└─────────────────────────────────────┘
```

#### 동작 방식
1. **독립 카운터 방식**
   - 각 시간대는 독립적인 카운터 보유
   - 시간대 A에서 다 쓴 시간이 시간대 B에 영향 없음
   
2. **시간대 정의**
   - 시작 시간과 종료 시간 설정 (15분 단위)
   - 최소 시간대 길이: 1시간
   - 최대 시간대 길이: 제한 없음
   - 시간대 간 간격: 제한 없음 (겹치지만 않으면 됨)

3. **예시 시나리오**
   ```
   설정:
   - 시간대 1: 09:00-12:00, 사용 1시간
   - 시간대 2: 13:00-18:00, 사용 1.5시간
   - 시간대 3: 19:00-23:00, 사용 2시간
   
   실제 사용:
   09:30-10:30 → 1시간 사용 (시간대 1 소진) ❌ 시간대 1 잠김
   10:31-12:00 → 사용 불가 (시간대 1 종료)
   13:00-14:30 → 1.5시간 사용 (시간대 2 소진) ❌ 시간대 2 잠김
   19:00-      → 시간대 3은 여전히 2시간 사용 가능! ✅
   ```

4. **제한 사항**
   - ⚠️ 최대 3개 시간대만 등록 가능
   - ❌ 요일별 다른 설정 불가
   - ❌ 시간대 겹침 불가

#### 검증 규칙
```swift
// 시간대 검증 로직
func validateTimeSlot(newSlot: TimeSlot, existingSlots: [TimeSlot]) -> Bool {
    // 1. 최대 3개 체크
    if existingSlots.count >= 3 {
        return false // "최대 3개까지만 등록 가능합니다"
    }
    
    // 2. 시간대 겹침 체크
    for slot in existingSlots {
        if newSlot.overlaps(with: slot) {
            return false // "시간대가 겹칩니다"
        }
    }
    
    // 3. 최소 길이 체크
    if newSlot.duration < 1.hour {
        return false // "최소 1시간 이상 설정해주세요"
    }
    
    return true
}
```

#### 사용자 피드백
- ✨ **프리미엄 배지**: 화면 상단에 "Premium" 배지 표시
- 📊 **시간대별 통계**: 각 시간대별 사용률 그래프
- 🎯 **최적화 제안**: "점심시간(12-13시)에는 사용하지 않으시는군요! 시간대 2를 13시부터 시작하시는 건 어떨까요?"

---

### 🚀 Pro 티어 - 요일별 설정

#### 기능 설명
Pro 사용자는 **요일별로 완전히 다른 시간 제한 프로필**을 설정할 수 있으며, 각 요일마다 시간대를 독립적으로 구성 가능합니다.

#### 설정 가능 항목
```
┌─────────────────────────────────────┐
│   🚀 요일별 프로필 설정              │
├─────────────────────────────────────┤
│                                     │
│  [월] [화] [수] [목] [금] [토] [일]  │
│   ●                                 │
│  (선택: 월요일)                      │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 📅 월요일 프로필              │   │
│  │                              │   │
│  │ [+ 시간대 추가] (무제한)      │   │
│  │                              │   │
│  │ ⏰ 09:00-12:00 → 1시간       │   │
│  │ ⏰ 13:00-18:00 → 1.5시간     │   │
│  │ ⏰ 19:00-23:00 → 2시간       │   │
│  │ ⏰ 23:00-24:00 → 30분        │   │
│  │                              │   │
│  └─────────────────────────────┘   │
│                                     │
│  [📋 다른 요일에 복사]              │
│  [🔄 주중/주말 일괄 설정]           │
│                                     │
└─────────────────────────────────────┘
```

#### 동작 방식
1. **요일별 독립 프로필**
   - 각 요일은 완전히 독립적인 설정 보유
   - 월요일 설정이 화요일에 영향 없음
   
2. **무제한 시간대**
   - Pro 사용자는 시간대 개수 제한 없음
   - 15분 단위로 세밀하게 분할 가능

3. **예시 시나리오**
   ```
   월요일 (출근일):
   - 07:00-09:00: 30분 (출근 준비)
   - 12:00-13:00: 30분 (점심시간)
   - 18:00-23:00: 2시간 (퇴근 후)
   
   토요일 (휴일):
   - 09:00-12:00: 2시간
   - 14:00-18:00: 3시간
   - 20:00-24:00: 3시간
   
   일요일 (디톡스 데이):
   - 전체 시간: 1시간 (엄격 모드)
   ```

4. **편의 기능**
   - 📋 **프로필 복사**: 월요일 설정을 화~금에 일괄 적용
   - 🔄 **패턴 설정**: "주중(월-금)", "주말(토-일)" 일괄 설정
   - 📥 **템플릿 가져오기**: "직장인", "학생", "프리랜서" 등 사전 정의된 템플릿
   - 💾 **프로필 저장**: 여러 개의 프로필을 저장하고 빠르게 전환

#### 고급 설정
```
┌─────────────────────────────────────┐
│   🎯 고급 설정                       │
├─────────────────────────────────────┤
│                                     │
│  ☑️ 공휴일 자동 감지                │
│     └─ 공휴일에 주말 설정 적용       │
│                                     │
│  ☑️ 생일/기념일 예외 설정            │
│     └─ 특정 날짜에 제한 해제        │
│                                     │
│  ☑️ 날씨 기반 조정 (AI 기능)         │
│     └─ 비 오는 날 실내 시간 증가    │
│                                     │
│  ☑️ 일정 연동 (캘린더)               │
│     └─ 회의 시간에 자동 제한 해제   │
│                                     │
└─────────────────────────────────────┘
```

#### 검증 규칙
```swift
// Pro 티어 검증 로직
func validateProTimeSlots(dayOfWeek: DayOfWeek, slots: [TimeSlot]) -> Bool {
    // 1. Pro 사용자는 개수 제한 없음
    // 단, 합리적인 최대값은 설정 (예: 20개)
    if slots.count > 20 {
        return false // "하루 최대 20개 시간대까지 설정 가능합니다"
    }
    
    // 2. 시간대 겹침 체크 (동일)
    for i in 0..<slots.count {
        for j in (i+1)..<slots.count {
            if slots[i].overlaps(with: slots[j]) {
                return false
            }
        }
    }
    
    // 3. 24시간 초과 체크
    let totalUsageTime = slots.reduce(0) { $0 + $1.allowedDuration }
    if totalUsageTime > 24.hours {
        return false // "하루 총 사용 시간은 24시간을 초과할 수 없습니다"
    }
    
    return true
}
```

#### 사용자 피드백
- 🌟 **Pro 배지**: 화면 상단에 "Pro" 배지와 특별 효과
- 📊 **요일별 비교 차트**: 요일별 사용 패턴 비교 그래프
- 🤖 **AI 추천**: "화요일에 가장 많이 사용하시네요. 다른 요일로 분산해보시는 건 어떨까요?"
- 🎯 **목표 달성 예측**: "이 패턴을 유지하면 이번 달 목표를 95% 달성할 수 있어요!"

---

## 📊 티어별 기능 비교표

| 기능 | Free | Premium | Pro |
|------|------|---------|-----|
| **시간 제한 방식** | 하루 총량 | 시간대별 분할 | 요일별 프로필 |
| **시간대 개수** | - | 최대 3개 | 무제한 |
| **요일별 설정** | ❌ | ❌ | ✅ |
| **시간대 최소 단위** | 1시간 | 15분 | 15분 |
| **프로필 복사** | ❌ | ❌ | ✅ |
| **템플릿 사용** | ❌ | ❌ | ✅ |
| **공휴일 자동 감지** | ❌ | ❌ | ✅ |
| **캘린더 연동** | ❌ | ❌ | ✅ |
| **AI 최적화 제안** | ❌ | 기본 | 고급 |
| **창의적 해제** | 3회/일 | 무제한 | 무제한 |
| **단어 새로고침** | 1회/일 | 무제한 | 무제한 |
| **통계 기간** | 7일 | 30일 | 무제한 |
| **광고** | 있음 | 없음 | 없음 |

---

## 🎨 UI/UX 설계

### 설정 화면 진입
```
메인 화면 → [⚙️ 설정] 버튼 → 시간 제한 설정
```

### 티어별 설정 화면 레이아웃

#### Free 사용자 화면
```
┌─────────────────────────────────────┐
│  ⚙️ 시간 제한 설정           [Free] │
├─────────────────────────────────────┤
│                                     │
│  하루 총 사용 시간                   │
│  ┌─────────────────────────────┐   │
│  │       [  3시간  ]           │   │
│  └─────────────────────────────┘   │
│                                     │
│  ⏰ 자동 해제 시간                   │
│  ┌─────────────────────────────┐   │
│  │      다음날 00시            │   │
│  └─────────────────────────────┘   │
│                                     │
├─────────────────────────────────────┤
│  💡 더 세밀한 제어가 필요하신가요?    │
│                                     │
│  Premium으로 업그레이드하면:         │
│  ✨ 시간대별 독립적인 제한 (최대 3개) │
│  ✨ 아침/점심/저녁 각각 다른 설정    │
│  ✨ 창의적 해제 무제한               │
│                                     │
│  [💎 Premium 둘러보기]              │
└─────────────────────────────────────┘
```

#### Premium 사용자 화면
```
┌─────────────────────────────────────┐
│  ⚙️ 시간 제한 설정      [💎Premium] │
├─────────────────────────────────────┤
│                                     │
│  [● 시간대별 제한]  [ 하루 총량]     │
│                                     │
│  📅 시간대 관리                      │
│  [+ 시간대 추가] (3개 중 2개 사용)   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 시간대 1: 아침 시간           │   │
│  │ ⏰ 09:00 - 12:00            │   │
│  │ ⏱️  1시간 사용 가능          │   │
│  │          [📝] [🗑️]          │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 시간대 2: 저녁 시간           │   │
│  │ ⏰ 19:00 - 23:00            │   │
│  │ ⏱️  2시간 사용 가능          │   │
│  │          [📝] [🗑️]          │   │
│  └─────────────────────────────┘   │
│                                     │
├─────────────────────────────────────┤
│  💡 요일별 다른 설정이 필요하신가요?  │
│                                     │
│  Pro로 업그레이드하면:               │
│  🚀 월~일 각각 다른 프로필          │
│  🚀 무제한 시간대 설정              │
│  🚀 템플릿 & 프로필 복사            │
│                                     │
│  [🌟 Pro 둘러보기]                 │
└─────────────────────────────────────┘
```

#### Pro 사용자 화면
```
┌─────────────────────────────────────┐
│  ⚙️ 시간 제한 설정       [🚀 Pro]  │
├─────────────────────────────────────┤
│                                     │
│  [● 요일별 프로필]  [ 시간대별 제한] │
│                                     │
│  📅 요일 선택                        │
│  [월] [화] [수] [목] [금] [토] [일]  │
│   ●    ○    ○    ○    ○    ○    ○  │
│                                     │
│  월요일 프로필                       │
│  [+ 시간대 추가] [📋 복사] [📥 템플릿]│
│                                     │
│  ┌─────────────────────────────┐   │
│  │ ⏰ 07:00-09:00 → 30분        │   │
│  │ ⏰ 12:00-13:00 → 30분        │   │
│  │ ⏰ 18:00-23:00 → 2시간       │   │
│  │          [📝] [🗑️] [📋]      │   │
│  └─────────────────────────────┘   │
│                                     │
│  [🔄 주중 일괄 적용]                │
│  [⚙️ 고급 설정]                     │
│                                     │
└─────────────────────────────────────┘
```

### 업그레이드 프롬프트 디자인

#### Free → Premium 유도
```
┌─────────────────────────────────────┐
│         💎 Premium 업그레이드        │
├─────────────────────────────────────┤
│                                     │
│  시간대별 세밀한 제어로               │
│  생산성을 극대화하세요!               │
│                                     │
│  ✨ 하루를 최대 3개 시간대로 분할     │
│  ✨ 아침/점심/저녁 각각 다른 제한     │
│  ✨ 창의적 해제 무제한                │
│  ✨ 단어 새로고침 무제한              │
│  ✨ 광고 제거                        │
│                                     │
│  ─────────────────────────────────  │
│                                     │
│  월간: $4.99                        │
│  연간: $39.99 (33% 절약!)           │
│                                     │
│  [14일 무료 체험 시작]               │
│  [나중에 하기]                       │
│                                     │
└─────────────────────────────────────┘
```

#### Premium → Pro 유도
```
┌─────────────────────────────────────┐
│         🚀 Pro 업그레이드            │
├─────────────────────────────────────┤
│                                     │
│  요일별 맞춤 설정으로                │
│  완벽한 라이프스타일 관리!            │
│                                     │
│  🚀 월~일 각각 다른 프로필           │
│  🚀 무제한 시간대 설정               │
│  🚀 프로필 복사 & 템플릿             │
│  🚀 공휴일 자동 감지                 │
│  🚀 캘린더 연동                      │
│  🚀 AI 최적화 제안                   │
│                                     │
│  ─────────────────────────────────  │
│                                     │
│  Premium 사용자 특별 할인:           │
│  ~~$9.99~~ → $7.99 (20% 할인)      │
│                                     │
│  [Pro로 업그레이드]                  │
│  [Premium 계속 사용]                │
│                                     │
└─────────────────────────────────────┘
```

---

## 🔧 기술 요구사항

### 데이터 모델

#### Free 티어 데이터 구조
```swift
struct FreeTierSettings: Codable {
    let tier: SubscriptionTier = .free
    var dailyLimit: TimeInterval // 초 단위, 예: 10800 (3시간)
    var autoUnlockTime: Date // 자동 해제 시간 (다음날 00시)
}
```

#### Premium 티어 데이터 구조
```swift
struct PremiumTierSettings: Codable {
    let tier: SubscriptionTier = .premium
    var timeSlots: [TimeSlot] // 최대 3개
}

struct TimeSlot: Codable, Identifiable {
    let id: UUID
    var name: String // "아침 시간", "저녁 시간" 등
    var startTime: Date // 시작 시간 (HH:mm)
    var endTime: Date // 종료 시간 (HH:mm)
    var allowedDuration: TimeInterval // 허용 시간
    var createdAt: Date
    
    // 검증 메서드
    func overlaps(with other: TimeSlot) -> Bool {
        // 시간대 겹침 검사 로직
    }
    
    var duration: TimeInterval {
        // startTime과 endTime 차이 계산
    }
}
```

#### Pro 티어 데이터 구조
```swift
struct ProTierSettings: Codable {
    let tier: SubscriptionTier = .pro
    var weeklyProfiles: [DayOfWeek: DayProfile]
}

enum DayOfWeek: String, Codable, CaseIterable {
    case monday, tuesday, wednesday, thursday, friday, saturday, sunday
}

struct DayProfile: Codable {
    var dayOfWeek: DayOfWeek
    var timeSlots: [TimeSlot] // 무제한
    var isActive: Bool // 해당 요일 프로필 활성화 여부
    var templateName: String? // "직장인", "학생" 등
}
```

### Core Data 스키마

```swift
// SubscriptionEntity
@objc(SubscriptionEntity)
public class SubscriptionEntity: NSManagedObject {
    @NSManaged public var tier: String // "free", "premium", "pro"
    @NSManaged public var startDate: Date
    @NSManaged public var expiryDate: Date?
    @NSManaged public var isActive: Bool
}

// TimeSlotEntity
@objc(TimeSlotEntity)
public class TimeSlotEntity: NSManagedObject {
    @NSManaged public var id: UUID
    @NSManaged public var name: String
    @NSManaged public var startHour: Int16
    @NSManaged public var startMinute: Int16
    @NSManaged public var endHour: Int16
    @NSManaged public var endMinute: Int16
    @NSManaged public var allowedDuration: Double
    @NSManaged public var dayOfWeek: String? // Pro 전용
}
```

### 구독 상태 관리

```swift
class SubscriptionManager: ObservableObject {
    @Published var currentTier: SubscriptionTier = .free
    @Published var isSubscriptionActive: Bool = false
    
    func checkSubscriptionStatus() {
        // StoreKit 2로 구독 상태 확인
    }
    
    func canAddTimeSlot(currentCount: Int) -> Bool {
        switch currentTier {
        case .free:
            return false
        case .premium:
            return currentCount < 3
        case .pro:
            return currentCount < 20 // 합리적 최대값
        }
    }
    
    func canSetWeeklyProfile() -> Bool {
        return currentTier == .pro
    }
}
```

### 시간 추적 로직

```swift
class UsageTracker {
    func getCurrentTimeSlot() -> TimeSlot? {
        let now = Date()
        let settings = loadCurrentSettings()
        
        switch settings.tier {
        case .free:
            // 하루 전체가 하나의 시간대
            return nil // Free는 시간대 개념 없음
            
        case .premium:
            // 현재 시간이 속한 시간대 찾기
            return settings.timeSlots.first { slot in
                slot.contains(time: now)
            }
            
        case .pro:
            // 현재 요일의 프로필에서 시간대 찾기
            let dayOfWeek = Calendar.current.component(.weekday, from: now)
            let profile = settings.weeklyProfiles[dayOfWeek]
            return profile?.timeSlots.first { slot in
                slot.contains(time: now)
            }
        }
    }
    
    func shouldLockDevice() -> Bool {
        let tier = SubscriptionManager.shared.currentTier
        
        switch tier {
        case .free:
            // 하루 총 사용 시간 체크
            return todayUsage >= dailyLimit
            
        case .premium, .pro:
            // 현재 시간대의 사용 시간 체크
            guard let currentSlot = getCurrentTimeSlot() else {
                return false // 설정된 시간대 밖이면 제한 없음
            }
            let slotUsage = getUsageFor(timeSlot: currentSlot)
            return slotUsage >= currentSlot.allowedDuration
        }
    }
}
```

---

## 📱 사용자 여정 (User Journey)

### Free 사용자의 여정

```
1. 앱 다운로드 & 첫 설정
   ↓
2. "하루 3시간" 설정
   ↓
3. 오전에 1시간, 오후에 1시간 사용
   ↓
4. 저녁 7시에 1시간 더 쓰려고 하니 잠김 ❌
   ↓
5. "아, 저녁 시간에만 쓰고 싶었는데..."
   ↓
6. [💎 Premium 안내 표시]
   "시간대별로 나눠서 설정하실 수 있어요!"
   ↓
7. 14일 무료 체험 시작 → Premium 전환
```

### Premium 사용자의 여정

```
1. Premium 구독 시작
   ↓
2. 시간대 3개 설정:
   - 아침(09-12시): 1시간
   - 점심(12-14시): 30분
   - 저녁(18-23시): 2시간
   ↓
3. 한 달 사용 후...
   "주말엔 더 쓰고 싶은데 평일엔 더 줄이고 싶어"
   ↓
4. [🚀 Pro 안내 표시]
   "요일별로 다르게 설정하실 수 있어요!"
   ↓
5. Pro로 업그레이드
```

### Pro 사용자의 여정

```
1. Pro 구독
   ↓
2. 요일별 세밀한 설정:
   월-금(직장인 모드):
   - 출근 전: 30분
   - 점심: 30분
   - 퇴근 후: 2시간
   
   토-일(여유 모드):
   - 오전: 2시간
   - 오후: 3시간
   - 저녁: 3시간
   ↓
3. 완벽한 워라밸 달성! 🎉
   ↓
4. 친구에게 추천 → 앱 성장
```

---

## 🚀 구현 로드맵

### Phase 1: Free 티어 구현 (Week 1-2)
- [ ] 하루 총량 제한 UI
- [ ] 단일 카운터 추적 로직
- [ ] 잠금/해제 로직
- [ ] Premium 업그레이드 프롬프트

### Phase 2: Premium 티어 구현 (Week 3-5)
- [ ] StoreKit 2 구독 연동
- [ ] 시간대 관리 UI
- [ ] 시간대별 독립 카운터
- [ ] 시간대 검증 로직
- [ ] Pro 업그레이드 프롬프트

### Phase 3: Pro 티어 구현 (Week 6-8)
- [ ] 요일별 프로필 UI
- [ ] 프로필 복사 기능
- [ ] 템플릿 시스템
- [ ] 고급 설정 (공휴일, 캘린더 연동)

### Phase 4: 최적화 & 테스트 (Week 9-10)
- [ ] 성능 최적화
- [ ] 엣지 케이스 테스트
- [ ] A/B 테스트 (업그레이드 프롬프트)
- [ ] 사용자 피드백 수집

---

## 📊 성공 지표 (KPI)

### 전환율 목표
- **Free → Premium**: 10% (첫 30일 내)
- **Premium → Pro**: 15% (첫 60일 내)
- **무료 체험 → 유료 전환**: 40%

### 사용자 행동 지표
- **Premium 사용자의 평균 시간대 개수**: 2.5개
- **Pro 사용자의 요일별 설정 비율**: 85%
- **시간대 수정 빈도**: 주 1-2회

### 재무 지표
- **ARPU (Average Revenue Per User)**: $2.50
- **LTV (Lifetime Value)**: $60
- **CAC (Customer Acquisition Cost)**: $15
- **LTV:CAC 비율**: 4:1

---

## ⚠️ 주의사항 및 고려사항

### 사용자 경험
1. **Free 티어의 가치**
   - 무료 버전이 너무 제한적이면 초기 이탈 증가
   - 핵심 가치는 경험할 수 있도록 유지
   
2. **업그레이드 타이밍**
   - 너무 자주 프롬프트 표시 시 사용자 불만
   - 자연스러운 타이밍에 가치 전달
   
3. **다운그레이드 처리**
   - Pro → Premium: 시간대 3개 초과 분 비활성화
   - Premium → Free: 시간대 설정 초기화, 총량 설정으로 전환

### 기술적 고려사항
1. **시간대 전환 시점**
   - 시간대가 바뀌는 순간의 사용 중 앱 처리
   - 시간대 경계에서의 카운터 리셋
   
2. **오프라인 처리**
   - 오프라인 상태에서의 시간 추적
   - 재연결 시 동기화
   
3. **시간대 수정 시**
   - 현재 사용 중인 시간대 수정 시 처리
   - 과거 통계 데이터 정합성

### 비즈니스 리스크
1. **구독 해지율**
   - 목표: 월 5% 이하
   - 해지 이유 분석 및 개선
   
2. **가격 저항**
   - 지역별 구매력 차이
   - 할인 프로모션 남발 주의

---

## 📝 마이그레이션 전략

### 기존 사용자 처리
```
기존 Free 사용자:
- 그대로 Free 유지
- "New! 시간대별 제한 기능 추가" 안내

기존 유료 사용자 (만약 있다면):
- 자동으로 Premium 부여
- "감사 메시지 + Pro 특별 할인" 제공
```

### 데이터 마이그레이션
```swift
func migrateToTimeSlotsSystem() {
    let users = fetchAllUsers()
    
    for user in users {
        if user.hasOldDailyLimitSetting {
            // 기존 하루 총량 설정을 Free 모델로 변환
            let freeSetting = FreeTierSettings(
                dailyLimit: user.oldDailyLimit,
                autoUnlockTime: user.oldAutoUnlockTime
            )
            user.settings = freeSetting
        }
    }
}
```

---

## 🎯 다음 단계

1. **요구사항 리뷰 및 승인**
2. **UI/UX 디자인 상세화** (Figma)
3. **StoreKit 설정** (App Store Connect)
4. **개발 착수**
5. **베타 테스트** (TestFlight)
6. **가격 A/B 테스트**
7. **정식 출시**

---

**문서 버전**: 1.0  
**최종 수정일**: 2025년 11월 3일  
**작성자**: DevJihwan  
**검토자**: -  
**승인자**: -
