# 바보상자자물쇠 - 개발 TODO 리스트

**작성일**: 2025년 10월 10일  
**작성자**: DevJihwan  
**프로젝트**: SmartLock Box iOS

---

## 📋 전체 개요

### 현재 상태
- ✅ 프로젝트 구조 완성 (26개 Swift 파일)
- ✅ MVVM 아키텍처 설계
- ✅ Xcode 프로젝트 설정 및 빌드 성공
- ✅ 기본 UI 레이아웃 구현
- ⚠️ 핵심 기능 미구현 (스켈레톤 코드만 존재)

### 목표
Phase 1부터 3까지 순차적으로 완료하여 앱스토어 배포 준비 완료

---

## 🎯 Phase 1: 핵심 기능 구현 (1-2주)

### 1️⃣ 단어 데이터베이스 구축 ⏳

**우선순위**: 최고 (다른 기능의 기반)  
**예상 소요시간**: 2-3일

#### 작업 항목
- [ ] 20,000개 한국어 단어 수집
  - [ ] 명사: 5,000개
  - [ ] 동사: 5,000개
  - [ ] 형용사: 5,000개
  - [ ] 추상명사: 5,000개
- [ ] JSON 데이터 구조 설계
  ```json
  {
    "words": [
      {
        "id": 1,
        "word": "바다",
        "category": "명사",
        "difficulty": "easy"
      }
    ]
  }
  ```
- [ ] Words.json 파일 생성 및 검증
- [ ] WordService.swift 실제 구현
  - [ ] JSON 파일 로딩
  - [ ] 카테고리별 필터링
  - [ ] 랜덤 2개 단어 선택 로직
  - [ ] 단어 새로고침 제한 (하루 3회)
- [ ] 단위 테스트 작성

**완료 기준**
- Words.json 파일에 20,000개 단어 저장
- WordService에서 랜덤 단어 2개 정상 반환
- 같은 단어가 동시에 선택되지 않도록 보장

---

### 2️⃣ AI API 연동 구현 ⏳

**우선순위**: 높음  
**예상 소요시간**: 3-4일

#### 2-1. OpenAI GPT-4 API
- [ ] API 키 환경 설정
  - [ ] Config.plist 파일 생성
  - [ ] .gitignore에 Config.plist 추가
  - [ ] Keychain에 API 키 저장
- [ ] AIEvaluationService.swift 구현
  - [ ] `callOpenAIAPI` 메서드 완성
  - [ ] URLSession을 사용한 API 호출
  - [ ] 응답 JSON 파싱
  - [ ] 에러 처리 (네트워크, 타임아웃, 인증 실패)
- [ ] 프롬프트 엔지니어링
  ```
  평가 기준:
  1. 두 단어 모두 포함 여부
  2. 창의성 및 독창성
  3. 문법적 정확성
  4. 의미적 연관성
  
  출력 형식: {"result": "PASS|FAIL", "feedback": "..."}
  ```
- [ ] Rate Limiting 구현 (하루 10회 제한)

#### 2-2. Anthropic Claude API
- [ ] API 키 설정 (OpenAI와 동일 방식)
- [ ] `callClaudeAPI` 메서드 완성
- [ ] Claude API 호출 및 응답 처리
- [ ] 에러 처리

#### 2-3. 이중 평가 시스템
- [ ] 두 AI 평가 동시 실행 (async/await)
- [ ] 둘 다 PASS일 때만 해제 성공
- [ ] 평가 결과 UI 업데이트
- [ ] 평가 실패 시 재시도 로직

**완료 기준**
- OpenAI와 Claude 모두 실제 API 호출 성공
- 평가 결과가 정확하게 반환
- 에러 상황에 대한 적절한 처리

---

### 3️⃣ Screen Time API 실제 구현 ⏳

**우선순위**: 최고 (앱의 핵심)  
**예상 소요시간**: 5-7일

#### 3-1. 권한 요청
- [ ] FamilyControls 권한 요청 플로우
- [ ] 권한 거부 시 안내 화면
- [ ] 권한 상태 체크 로직

#### 3-2. 사용 시간 모니터링
- [ ] DeviceActivity 프레임워크 연동
- [ ] DeviceActivityMonitor Extension 생성
- [ ] 사용 시간 실시간 추적
- [ ] 목표 시간 도달 감지
- [ ] 백그라운드에서도 추적 가능하도록 구현

#### 3-3. 앱 차단 시스템
- [ ] ManagedSettings API 연동
- [ ] 차단할 앱 목록 관리
- [ ] 예외 앱 설정 (전화, SMS, 응급)
  ```swift
  let exceptions = [
    "com.apple.mobilephone",  // 전화
    "com.apple.MobileSMS",    // 문자
    "com.apple.Health"        // 건강
  ]
  ```
- [ ] 차단 활성화/비활성화 로직
- [ ] Shield 화면 커스터마이징

#### 3-4. 자동 해제 시스템
- [ ] 다음날 0시 자동 해제 타이머
- [ ] 사용자 설정 시간 해제
- [ ] 타이머 잔여 시간 표시

**완료 기준**
- 실제 기기에서 앱 차단 동작 확인
- 목표 시간 초과 시 자동 잠금
- 전화/SMS는 정상 사용 가능

---

### 4️⃣ Core Data CRUD 구현 ⏳

**우선순위**: 중간  
**예상 소요시간**: 2-3일

#### 4-1. UsageRecord 관리
- [ ] 일별 사용 기록 저장
  ```swift
  struct UsageRecord {
    var date: Date
    var totalMinutes: Int
    var goalMinutes: Int
    var isGoalAchieved: Bool
  }
  ```
- [ ] 데이터 생성 (Create)
- [ ] 데이터 조회 (Read)
  - [ ] 특정 날짜 조회
  - [ ] 주간 데이터 조회
  - [ ] 월간 데이터 조회
- [ ] 데이터 수정 (Update)
- [ ] 데이터 삭제 (Delete)

#### 4-2. UnlockAttempt 관리
- [ ] 해제 시도 기록 저장
  ```swift
  struct UnlockAttempt {
    var timestamp: Date
    var word1: String
    var word2: String
    var sentence: String
    var chatGPTResult: String
    var claudeResult: String
    var isSuccessful: Bool
  }
  ```
- [ ] CRUD 메서드 구현
- [ ] 하루 시도 횟수 제한 (10회)

#### 4-3. PersistenceController 완성
- [ ] Core Data Stack 설정
- [ ] Batch 작업 최적화
- [ ] 데이터 마이그레이션 전략

**완료 기준**
- 사용 기록이 영구적으로 저장
- 월간 히트맵에 정확한 데이터 표시
- 해제 시도 이력 조회 가능

---

### 5️⃣ 통합 테스트 ⏳

**예상 소요시간**: 1-2일

- [ ] 전체 플로우 테스트
  1. 앱 시작 → 권한 요청
  2. 목표 시간 설정
  3. 사용 시간 추적
  4. 시간 초과 시 잠금
  5. 창의적 해제 시도
  6. AI 평가 및 결과
- [ ] 엣지 케이스 테스트
  - [ ] 네트워크 끊김
  - [ ] 백그라운드 상태
  - [ ] 메모리 부족
  - [ ] 타임존 변경

---

## 🎨 Phase 2: 기능 보완 및 UX 개선 (1주)

### 1️⃣ 알림 시스템 구현

**예상 소요시간**: 1-2일

- [ ] UserNotifications 권한 요청
- [ ] 알림 타입별 구현
  - [ ] 목표 10분 전 알림
  - [ ] 잠금 시작 알림
  - [ ] 자동 해제 알림
  - [ ] 일일 리포트 알림 (선택)
- [ ] 알림 스케줄링
- [ ] 알림 설정 화면

---

### 2️⃣ UI/UX 애니메이션

**예상 소요시간**: 2-3일

#### 메인 화면
- [ ] 프로그레스바 애니메이션
- [ ] 카운트다운 타이머 애니메이션
- [ ] 히트맵 탭 인터랙션

#### 잠금 화면
- [ ] 자물쇠 잠금/해제 애니메이션
- [ ] 펄스 효과 (열쇠 버튼)
- [ ] 시간 경과 효과

#### 창의적 해제 화면
- [ ] 단어 카드 플립 애니메이션
- [ ] AI 평가 로딩 애니메이션
- [ ] 성공/실패 결과 애니메이션

---

### 3️⃣ 에러 처리 및 상태 관리

**예상 소요시간**: 1-2일

- [ ] 네트워크 에러 처리
  - [ ] 에러 메시지 표시
  - [ ] 재시도 버튼
  - [ ] 오프라인 모드 안내
- [ ] API 에러 처리
  - [ ] Rate Limit 초과
  - [ ] 인증 실패
  - [ ] 타임아웃
- [ ] 로딩 상태 UI
  - [ ] Skeleton Screen
  - [ ] Progress Indicator
  - [ ] Shimmer 효과

---

### 4️⃣ 설정 화면 구현

**예상 소요시간**: 1-2일

- [ ] 목표 시간 설정
- [ ] 자동 해제 시간 설정
- [ ] 알림 설정
- [ ] 예외 앱 관리
- [ ] 데이터 초기화 기능
- [ ] 버전 정보 및 오픈소스 라이선스

---

## 🚀 Phase 3: 완성도 향상 및 배포 준비 (1주)

### 1️⃣ 테스트 작성

**예상 소요시간**: 2-3일

#### 단위 테스트
- [ ] WordService 테스트
- [ ] AIEvaluationService 테스트
- [ ] UsageDataService 테스트
- [ ] ViewModel 테스트

#### UI 테스트
- [ ] 메인 화면 플로우
- [ ] 잠금/해제 플로우
- [ ] 설정 변경 플로우

#### 통합 테스트
- [ ] API 연동 테스트
- [ ] Core Data 테스트
- [ ] Screen Time 테스트 (실제 기기)

---

### 2️⃣ 다크 모드 지원

**예상 소요시간**: 1일

- [ ] 다크 모드 색상 팔레트 정의
- [ ] 모든 뷰에 다크 모드 적용
- [ ] 이미지 및 아이콘 다크 모드 버전
- [ ] 다크 모드 전환 테스트

---

### 3️⃣ 접근성 개선

**예상 소요시간**: 1일

- [ ] VoiceOver 지원
- [ ] Dynamic Type 지원
- [ ] 색상 대비 개선
- [ ] 버튼 크기 조정
- [ ] Accessibility Label 추가

---

### 4️⃣ 앱 아이콘 및 디자인

**예상 소요시간**: 1-2일

- [ ] 앱 아이콘 디자인 (1024x1024)
- [ ] 다양한 크기 아이콘 생성
- [ ] 스플래시 스크린
- [ ] 온보딩 화면 (선택)

---

### 5️⃣ 앱스토어 준비

**예상 소요시간**: 2-3일

#### 스크린샷
- [ ] iPhone 14 Pro Max (6.7")
- [ ] iPhone 14 (6.1")
- [ ] iPhone SE (4.7")
- [ ] iPad Pro (12.9")

#### 앱 설명
- [ ] 한국어 설명 작성
- [ ] 영어 설명 작성 (선택)
- [ ] 주요 기능 리스트
- [ ] 스크린샷 캡션

#### 정책 문서
- [ ] Privacy Policy 작성
- [ ] Terms of Service 작성
- [ ] EULA (선택)

#### TestFlight
- [ ] 베타 테스트 그룹 설정
- [ ] 베타 테스트 진행 (1-2주)
- [ ] 피드백 수집 및 버그 수정

---

## 📊 진행 상황 추적

### 현재 진행률
```
Phase 1: ⬜⬜⬜⬜⬜⬜⬜⬜⬜⬜ 0%
Phase 2: ⬜⬜⬜⬜⬜⬜⬜⬜⬜⬜ 0%
Phase 3: ⬜⬜⬜⬜⬜⬜⬜⬜⬜⬜ 0%

전체: 0% 완료
```

### 예상 일정
- **Phase 1 시작**: 2025년 10월 10일
- **Phase 1 완료 목표**: 2025년 10월 24일 (2주)
- **Phase 2 완료 목표**: 2025년 10월 31일 (1주)
- **Phase 3 완료 목표**: 2025년 11월 7일 (1주)
- **앱스토어 제출**: 2025년 11월 중순

---

## 🔍 위험 요소 및 대응책

### 1. Screen Time API의 복잡성
**위험**: Screen Time API가 복잡하고 문서가 부족
**대응**: 
- 충분한 시간 할당 (5-7일)
- 실제 기기에서 테스트
- Apple 샘플 코드 참고

### 2. AI API 비용
**위험**: OpenAI와 Claude API 사용 비용
**대응**:
- 무료 티어 최대 활용
- 캐싱 전략
- 일일 사용량 제한

### 3. 앱스토어 리뷰 거절
**위험**: Screen Time API 사용 정당성
**대응**:
- 명확한 사용 목적 명시
- Privacy Policy 철저히 작성
- 데이터 수집 최소화

---

## 📝 메모

### 개발 우선순위 원칙
1. **사용자 안전**: 전화/SMS는 항상 사용 가능
2. **데이터 프라이버시**: 모든 데이터 로컬 저장
3. **사용자 경험**: 직관적이고 간단한 UI
4. **안정성**: 충분한 테스트

### 주요 기술 스택
- **UI**: SwiftUI
- **아키텍처**: MVVM
- **비동기**: async/await, Combine
- **데이터**: Core Data
- **API**: URLSession
- **권한**: FamilyControls, DeviceActivity

---

**문서 버전**: 1.0  
**최종 수정일**: 2025년 10월 10일  
**다음 업데이트**: Phase 1 완료 시
